<!--
    "非同步傳送"功能成功
-->
<html>
	<head>
		<meta charset = "utf-8">
        <title>My test page</title>
        <!--"https://developers.google.com/speed/libraries"-->
        <script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

        <script>
            $(document).ready(function(){
                /*改變文字*/
                $("#change").click(function(){
                    $("#content").text("456");
                });

                
                $("#newBtn").click(function(){
                    /*新增"button"*/
                    $("#content").html('<button type = "button" id = "newone">新按紐 </button>');
                    
                    /*"新button"功能*/
                    $("#newone").bind("click", function(){
                        $("#content").text("內容");
                    });
                });

                /*"非同步傳送"*/
                $("#ajaxBtn").click(function(){
                    var xhttp = new XMLHttpRequest();

                    //檢查是否有傳送成功
                    xhttp.onreadystatechange = function(){
                        if(this.readyState == 4 && this.status == 200)
                        {
                            $("#content").text(this.responseText);
                        }
                    };

                    //使用"GET"
                    //這裡有些問題
                    /*
                    xhttp.open("GET", "http://localhost:3000/test"+"?mydata="+$("#mydata").val(), true);
                    xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                    xhttp.send("mydata=123");
                    */
                    //使用"POST"
                    
                    xhttp.open("POST", "http://localhost:3000/write", true);
                    xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                    xhttp.send("mydata="+$("#mydata").val());
                });

                /*"非同步傳送"*/
                $("#create_sensor").click(function(){
                    var xhttp = new XMLHttpRequest();

                    //檢查是否有傳送成功
                    xhttp.onreadystatechange = function(){
                        if(this.readyState == 4 && this.status == 200)
                        {
                            $("#content").text(this.responseText);
                        }
                    };

                    //使用"POST"
                    xhttp.open("POST", "http://localhost:3000/write", true);
                    xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
                    xhttp.send("sensor_name="+$("#sensor_name").val());
                    //使用"POST"
                });
                
                
                
            });
        </script>
    </head>

    <body>
        <h3>動態改變</h3>
        <button type="button" id="change">改變</button>
        <button type="button" id="newBtn">新增按鈕</button>

        <!--傳送的方法目前就是"GET"和"POST"-->
		<form action="http://localhost:3000/write" method="POST">
			<label>Name:</label>
			<input type="text" name="mydata" id="mydata">
			<label for="mail"></label>
            <button type="submit">同步傳送</button>
            <button type="button" id="ajaxBtn">非同步傳送</button>

        </form>
        <!--"id"是獨特的，只能用在一個，其餘的"id"會沒有功能-->
        <p id="content">原本</p>

        <form method="POST">
			<label>CREATE SENSOR</label>
			<input type="text" name="mydata" id="mydata">
			<label for="mail"></label>
            <button type="submit">同步傳送</button>
            <button type="button" id="ajaxBtn">非同步傳送</button>
        </form>

        <form method="POST">
			<label>DELETE SENSOR</label>
			<input type="text" name="mydata" id="mydata">
			<label for="mail"></label>
            <button type="submit">同步傳送</button>
            <button type="button" id="ajaxBtn">非同步傳送</button>
        </form>

        <form method="POST">
			<label>CREAT DATA CONTENT</label>
			<input type="text" name="mydata" id="mydata">
			<label for="mail"></label>
            <button type="submit">同步傳送</button>
            <button type="button" id="ajaxBtn">非同步傳送</button>
        </form>

        <form method="POST">
			<label>DELETE  DATA CONTENT</label>
			<input type="text" name="mydata" id="mydata">
			<label for="mail"></label>
            <button type="submit">同步傳送</button>
            <button type="button" id="ajaxBtn">非同步傳送</button>
        </form>
    

    </body>
</html>